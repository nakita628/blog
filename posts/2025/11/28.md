---
date: 2025-11-28
title: TypeScript サブタイプとスーパータイプ
description: サブタイプとスーパータイプ
tags: 
    - TypeScript
prev:
    text: TypeScript インターフェイス
    link: /posts/2025/11/26
next:
    false
---

# TypeScript サブタイプとスーパータイプ

&emsp;`TypeScript`の型同士の関係には、**サブタイプ**(subtype)と**スーパータイプ**(supertype)という概念がある。

&emsp;型Aと型Bが存在し、型Aの代わりに型Bを使用することができるとき(型Aが求められる文脈で型Bが使用できるとき)、型Bをサブタイプ、型Aをスーパータイプと呼ぶ。一般的に、サブタイプとスーパータイプの関係は記号`<:`を用いて、「サブタイプ <: スーパータイプ」と表現する。この表記法に従えば、型Bと型Aの関係は`B<:A`と表現できる。

:::code-group
```ts [index.ts]
// 変数はvalは型推論により string 型になる
const val = '10'

// number | string 型が求められる変数に string 型の変数を代入
const age: number | string = val // OK
```
:::

&emsp;上記の例では、変数`age`は`number | string`型が指定されているが、代わりに`string`型の変数を代入している。この操作は許可される。この場合、`string`型は`number | string`型のサブタイプで、逆に`number | string`型は`string`型のスーパータイプ。

:::code-group
```ts [index.ts]
type Name = {
  name: string
}

// Name型のサブタイプ
type NameAndAge = {
  name: string
  age: number
}

// nameだけを出力する関数
function logName(person: Name) {
  console.log(person.name)
}

// nameとageを出力する関数
function logNameAndAge(person: NameAndAge) {
  console.log(person.name, person.age)
}

const personOnlyName: Name = { name: 'John' }
const personAndAge: NameAndAge = { name: 'John', age: 20 }

// OK
logName(personAndAge)
// NG
// logNameAndAge(personOnlyName)
// 型 'Name' の引数を型 'NameAndAge' のパラメーターに割り当てることはできません。
// プロパティ 'age' は型 'Name' にありませんが、型 'NameAndAge' では必須です。
```
:::

&emsp;上記の例では、関数`logName`は`Name`型のオブジェクトを引数にとり、`logNameAndAge`は`NameAndAge`型のオブジェクトを引数にとる。

&emsp;`logName`関数に`NameAndAge`型のオブジェクトを渡すとことができるのは、`NameAndAge`型が`Name`型のサブタイプであるため(NameAndAge<:Name の関係)。この場合、`logName`関数は`name`プロパティのみを使用しているため、追加の`age`プロパティがあっても問題ない。

&emsp;一方で、`logNameAndAge`関数に`Name`型のオブジェクトを渡すことはできない。これは`Name`型が`age`プロパティを持てないため、`NameAndAge`型のスーパータイプとみなされず、必要なプロパティが不足しているため。

&emsp;部分集合に属するすべての要素は、その上位集合にも属する。すなわち、サブタイプに含まれるすべての値はスーパータイプの値として代わりに使用できるとということが理解できる。