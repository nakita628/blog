import{_ as a,c as i,o as n,a7 as p}from"./chunks/framework.CbZ0TyXs.js";const o=JSON.parse('{"title":"Docker MySQL","description":"Docker MySQL","frontmatter":{"date":"2025-03-12T00:00:00.000Z","title":"Docker MySQL","description":"Docker MySQL","tags":["Docker","MySQL"],"prev":{"text":"Drizzle SQLite","link":"/posts/2025/02/01"},"next":{"text":"MySQL Basic","link":"/posts/2025/03/13"}},"headers":[],"relativePath":"posts/2025/03/12.md","filePath":"posts/2025/03/12.md"}'),l={name:"posts/2025/03/12.md"};function e(t,s,h,k,d,c){return n(),i("div",null,[...s[0]||(s[0]=[p(`<h1 id="docker-mysql" tabindex="-1">Docker MySQL <a class="header-anchor" href="#docker-mysql" aria-label="Permalink to &quot;Docker MySQL&quot;">​</a></h1><h2 id="directory-structure" tabindex="-1">Directory Structure <a class="header-anchor" href="#directory-structure" aria-label="Permalink to &quot;Directory Structure&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── .env</span></span>
<span class="line"><span>├── docker-compose.yml</span></span>
<span class="line"><span>├── mysql</span></span>
<span class="line"><span>│   ├── Dockerfile</span></span>
<span class="line"><span>│   └── my.cnf</span></span>
<span class="line"><span>└── README.md</span></span></code></pre></div><h2 id="env" tabindex="-1">.env <a class="header-anchor" href="#env" aria-label="Permalink to &quot;.env&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>MYSQL_DATABASE=***</span></span>
<span class="line"><span>MYSQL_USER=***</span></span>
<span class="line"><span>MYSQL_PASSWORD=***</span></span>
<span class="line"><span>MYSQL_ROOT_PASSWORD=***</span></span>
<span class="line"><span>MYSQL_PORT=***</span></span></code></pre></div><h2 id="dockerfile" tabindex="-1">DockerFile <a class="header-anchor" href="#dockerfile" aria-label="Permalink to &quot;DockerFile&quot;">​</a></h2><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> --platform=linux/x86_64 mysql:8.0-debian</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> my.cnf /etc/mysql/conf.d/my.cnf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> apt-get update &amp;&amp; apt-get install -y locales \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &amp;&amp; sed -i -e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;s/# </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ja_JP.UTF-8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /etc/locale.gen \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &amp;&amp; locale-gen \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &amp;&amp; update-locale LANG=ja_JP.UTF-8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LC_ALL ja_JP.UTF-8</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TZ Asia/Tokyo</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LANG=ja_JP.UTF-8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 3306</span></span></code></pre></div><ul><li><p><code>apt-get update</code> パッケージリストを最新の状態にする。</p></li><li><p><code>apt-get install -y locales</code> パッケージのインストール。</p></li><li><p><code>sed -i -e &#39;s/# \\(ja_JP.UTF-8\\)/\\1/&#39; /etc/locale.gen \\</code> コマンドで行を有効化。</p></li><li><p><code>local-gen</code> ローケルを生成</p></li><li><p><code>update-locale LANG=ja_JP.UTF-8</code> システム全体のデフォルトロケール。</p></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># C.UTF-8 UTF-8</span></span>
<span class="line"><span># aa_DJ ISO-8859-1</span></span>
<span class="line"><span># aa_DJ.UTF-8 UTF-8</span></span>
<span class="line"><span># aa_ER UTF-8</span></span>
<span class="line"><span># aa_ER@saaho UTF-8</span></span>
<span class="line"><span># aa_ET UTF-8</span></span>
<span class="line"><span># af_ZA ISO-8859-1</span></span>
<span class="line"><span># af_ZA.UTF-8 UTF-8</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>ja_JP.UTF-8 UTF-8</span></span></code></pre></div><p> タイムゾーンの設定。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ENV LC_ALL ja_JP.UTF-8</span></span>
<span class="line"><span>ENV TZ Asia/Tokyo</span></span>
<span class="line"><span>ENV LANG=ja_JP.UTF-8</span></span></code></pre></div><h2 id="my-cnf" tabindex="-1">my.cnf <a class="header-anchor" href="#my-cnf" aria-label="Permalink to &quot;my.cnf&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[mysqld]</span></span>
<span class="line"><span>character-set-server=utf8mb4</span></span>
<span class="line"><span>collation-server=utf8mb4_unicode_ci</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[client]</span></span>
<span class="line"><span>default-character-set=utf8mb4</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[mysql]</span></span>
<span class="line"><span>default-character-set=utf8mb4</span></span></code></pre></div><h2 id="データベースファイルと設定ファイル-apt系" tabindex="-1">データベースファイルと設定ファイル(APT系) <a class="header-anchor" href="#データベースファイルと設定ファイル-apt系" aria-label="Permalink to &quot;データベースファイルと設定ファイル(APT系)&quot;">​</a></h2><table tabindex="0"><thead><tr><th>項目</th><th>ファイルまたはディレクトリ</th></tr></thead><tbody><tr><td>データベースディレクトリ</td><td>var/lib/mysql/</td></tr><tr><td>設定ファイル</td><td>/etc/mysql/my.cnf</td></tr><tr><td>追加設定ファイル</td><td>/etc/mysql/conf.d/mysql.cnf</td></tr></tbody></table><h2 id="docker-compose-yml" tabindex="-1">docker-compose.yml <a class="header-anchor" href="#docker-compose-yml" aria-label="Permalink to &quot;docker-compose.yml&quot;">​</a></h2><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3.8&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./mysql/</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dockerfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">docker-mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql_data:/var/lib/mysql/</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MYSQL_DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${MYSQL_DATABASE}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MYSQL_USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${MYSQL_USER}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MYSQL_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${MYSQL_PASSWORD}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${MYSQL_ROOT_PASSWORD}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${MYSQL_PORT_HOST}:3306&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mysql_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div><h2 id="データベースと設定ファイル" tabindex="-1">データベースと設定ファイル <a class="header-anchor" href="#データベースと設定ファイル" aria-label="Permalink to &quot;データベースと設定ファイル&quot;">​</a></h2><p> 起動する。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><p> コンテナに入る。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/bash</span></span></code></pre></div><h2 id="mysqlに接続" tabindex="-1">mysqlに接続 <a class="header-anchor" href="#mysqlに接続" aria-label="Permalink to &quot;mysqlに接続&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ***</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">***</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mysql&gt;</span></span></code></pre></div><h2 id="mysqlコマンドクライアントの終了" tabindex="-1">mysqlコマンドクライアントの終了 <a class="header-anchor" href="#mysqlコマンドクライアントの終了" aria-label="Permalink to &quot;mysqlコマンドクライアントの終了&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>exit</span></span>
<span class="line"><span>quit</span></span>
<span class="line"><span>\\q</span></span></code></pre></div>`,27)])])}const E=a(l,[["render",e]]);export{o as __pageData,E as default};
