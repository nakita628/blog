import{_ as i,c as a,o as n,a7 as p}from"./chunks/framework.BK-5gBo2.js";const E=JSON.parse('{"title":"TypeScript 複雑な型と互換性","description":"複雑な型と互換性","frontmatter":{"date":"2025-11-30T00:00:00.000Z","title":"TypeScript 複雑な型と互換性","description":"複雑な型と互換性","tags":["TypeScript"],"prev":{"text":"TypeScript トップ型とボトム型","link":"/posts/2025/11/29"},"next":{"text":"TypeScript オブジェクト型の構造的部分的片付け","link":"/posts/2025/12/01"}},"headers":[],"relativePath":"posts/2025/11/30.md","filePath":"posts/2025/11/30.md"}'),e={name:"posts/2025/11/30.md"};function l(h,s,t,k,d,r){return n(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="typescript-複雑な型と互換性" tabindex="-1">TypeScript 複雑な型と互換性 <a class="header-anchor" href="#typescript-複雑な型と互換性" aria-label="Permalink to &quot;TypeScript 複雑な型と互換性&quot;">​</a></h1><p> オブジェクト型の、型Aと型Bが存在するとき、型Bが型Aのサブタイプとして見なされるのは、次の両方の条件が満たされる場合。</p><ul><li><p>型Aに存在するすべてのプロパティが型Bに存在する</p></li><li><p>型Bのプロパティの型が、対応する型Aのプロパティの型のサブタイプである</p></li></ul><p> これを型の関係の記号で表現すると、「Bの各プロパティ型 &lt;: 各Aのプロパティの型」となる。この型の比較は再帰的に実行され、プロパティがさらにオブジェクト型を持つ場合、そのオブジェクト型に対しても同じサブタイプが適用される。</p><h2 id="オブジェクト型の構造的部分的片付け" tabindex="-1">オブジェクト型の構造的部分的片付け <a class="header-anchor" href="#オブジェクト型の構造的部分的片付け" aria-label="Permalink to &quot;オブジェクト型の構造的部分的片付け&quot;">​</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-XrqI6" id="tab-u-hoFZL" checked><label data-title="index.ts" for="tab-u-hoFZL">index.ts</label></div><div class="blocks"><div class="language-ts vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ケース１</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> john</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;John&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gender: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;male&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Personにはないプロパティが存在する</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OK 変数johnの各プロパティ型 &lt;: Personの各プロパティ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">person </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> john</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ケース２</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jane</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Jane&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  age: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;25&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// string型はPersonのageの型のサブタイプではない</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NG</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// person = jane</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 型 &#39;{ name: string; age: string; }&#39; を型 &#39;Person&#39; に割り当てることはできません。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// プロパティ &#39;age&#39; の型に互換性がありません。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 型 &#39;string&#39; を型 &#39;number&#39; に割り当てることはできません</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ケース3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> alice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Personに存在するプロパティageが欠如している</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NG</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// person = alice</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// プロパティ &#39;age&#39; は型 &#39;{ name: string; }&#39; にありませんが、型 &#39;Person&#39; では必須です。</span></span></code></pre></div></div></div><p> 上記の例の、ケース1では、変数<code>john</code>には<code>Person</code>インターフェイスに定義されているプロパティがすべて含まれており、加えて<code>Person</code>には定義されていない追加のプロパティがある。この場合、「<code>john</code>の各プロパティの型 &lt;: <code>Person</code>の各プロパティの型」の条件を満たしているため、変数<code>person</code>に<code>john</code>を代入することが可能。</p><p> ケース2では、変数<code>jane</code>は<code>Person</code>が持つプロパティをすべて保持しているが、<code>age</code>プロパティの型(<code>string</code>型)は<code>Person</code>の<code>age</code>の型(<code>number</code>型)のサブタイプではないので代入できない。</p><p> ケース3では、変数<code>alice</code>は<code>Person</code>の必須プロパティ<code>age</code>を持っていないため、<code>Person</code>に<code>alice</code>を代入することはできない。</p><p> この構造的部分型付けは、関数の引数としてオブジェクト型の値を渡す際にも同じように適用される。</p><h2 id="関数のパラメータがオブジェクト型の場合の構造的部分型付け" tabindex="-1">関数のパラメータがオブジェクト型の場合の構造的部分型付け <a class="header-anchor" href="#関数のパラメータがオブジェクト型の場合の構造的部分型付け" aria-label="Permalink to &quot;関数のパラメータがオブジェクト型の場合の構造的部分型付け&quot;">​</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-At542" id="tab-om3w02H" checked><label data-title="index.ts" for="tab-om3w02H">index.ts</label></div><div class="blocks"><div class="language-ts vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;John&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gender: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;male&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> introduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Hello, I&#39;m \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">person</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">introduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OK</span></span></code></pre></div></div></div><p> 上記の例では、<code>Person</code>型のパラメータを持つ関数<code>introduce</code>に、変数<code>john</code>を渡して実行している。この場合も「<code>john</code>の各プロパティ &lt;: <code>Person</code>の各プロパティ」の関係を満たすので問題なく実行可能。</p><p> 構造的型付けとは対照的に、型の互換性を型に付与された&quot;名前&quot;に基づいて判断する<strong>名前的型付け</strong>(nominal typing)というシステムも存在する。この型システムは<code>C++</code>や<code>Java</code>などの言語で見られ、2つの型が同じ構造を持っていても、名前が異なる場合には異なる型として扱われる。</p><p> <code>JavaScript</code>では無名の関数式やオブジェクトリテラルが広く使われているため、名前的型付よりも 構造的型付けによる型の互換性の判断がより適している。</p>`,15)])])}const o=i(e,[["render",l]]);export{E as __pageData,o as default};
